import{_ as i,c as a,o as n,ae as e}from"./chunks/framework.CLNW5JS9.js";const t="/blog/assets/compile_error.Clf-x82W.png",p="/blog/assets/console_info.DDdVCQnF.png",l="/blog/assets/console_quiet.QRNxZVBJ.png",h="/blog/assets/console_noinfo.BinV7Q5A.png",k="/blog/assets/inline.ByU96hCp.png",r="/blog/assets/public.DCsTt5hq.png",d="/blog/assets/public_path.DN45pRhX.png",E="/blog/assets/public_and_path.CiPZmQbc.png",o="/blog/assets/headers.C0JF4ZKy.png",B=JSON.parse('{"title":"DevServer","description":"","frontmatter":{"sidebarDepth":3},"headers":[],"relativePath":"docs/tools/webpack/dev-server.md","filePath":"docs/tools/webpack/dev-server.md"}'),g={name:"docs/tools/webpack/dev-server.md"};function c(y,s,F,u,b,v){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="devserver" tabindex="-1">DevServer <a class="header-anchor" href="#devserver" aria-label="Permalink to &quot;DevServer&quot;">â€‹</a></h1><p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œåˆ©ç”¨åˆç†çš„ <code>devServer</code> é…ç½®ï¼Œå¯ä»¥æœ‰æ•ˆçš„æé«˜æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ã€‚æœ¬èŠ‚æˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚æœå¯¹ <code>devServer</code> è¿›è¡Œé…ç½®ã€‚</p><h2 id="å®‰è£…" tabindex="-1">å®‰è£… <a class="header-anchor" href="#å®‰è£…" aria-label="Permalink to &quot;å®‰è£…&quot;">â€‹</a></h2><p>åœ¨ä»‹ç»å…·ä½“å†…å®¹ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆå®‰è£…è¿™ä¸ªåŒ…ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install webpack-dev-server</span></span></code></pre></div><p>æ¥ç€é…ç½®ä¸€ä¸ª npm script å³å¯ï¼š</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;dev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;webpack-dev-server&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æœ€åæ‰§è¡Œ <code>npm run dev</code>ï¼Œä½ çš„åº”ç”¨å°±æˆåŠŸçš„è¿è¡Œåœ¨è¿™ä¸ªå¼€å‘æœåŠ¡å™¨ä¸Šäº†ã€‚è¿™æ—¶å€™å¦‚æœä½ æ²¡æœ‰åœ¨ webpack é…ç½®æ–‡ä»¶ä¸­é…ç½® devServer å±æ€§çš„è¯ï¼Œä¼šé‡‡ç”¨å®ƒçš„é»˜è®¤é…ç½®ï¼Œæ¯”å¦‚é»˜è®¤ç«¯å£æ˜¯ 8080 ç­‰ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ç»†è¯´å®ƒçš„å„é¡¹é…ç½®ã€‚</p><h2 id="é…ç½®" tabindex="-1">é…ç½® <a class="header-anchor" href="#é…ç½®" aria-label="Permalink to &quot;é…ç½®&quot;">â€‹</a></h2><h3 id="port-ğŸ”‘" tabindex="-1">port ğŸ”‘ <a class="header-anchor" href="#port-ğŸ”‘" aria-label="Permalink to &quot;port ğŸ”‘&quot;">â€‹</a></h3><p>æœåŠ¡å™¨è¿è¡Œçš„ç«¯å£å·ï¼Œé»˜è®¤ 8080ã€‚</p><h3 id="open-ğŸ”‘" tabindex="-1">open ğŸ”‘ <a class="header-anchor" href="#open-ğŸ”‘" aria-label="Permalink to &quot;open ğŸ”‘&quot;">â€‹</a></h3><p>æ˜¯å¦è‡ªåŠ¨çš„æ‰“å¼€æµè§ˆå™¨ã€‚è®¾ç½®ä¸º true çš„è¯ï¼Œä¼šè‡ªåŠ¨çš„æ‰“å¼€ä½ çš„<strong>é»˜è®¤æµè§ˆå™¨</strong>ã€‚</p><p>å¦‚æœä½ æƒ³æ‰“å¼€æŒ‡å®šæµè§ˆå™¨çš„è¯ï¼Œæ¯”å¦‚ä½ åœ¨ Mac OS ä¸Šæƒ³é»˜è®¤æ‰“å¼€ Firefoxï¼Œä½ å¯ä»¥è®¾ç½®ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Firefox&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>æ³¨æ„ï¼Œè¿™é‡Œçš„æµè§ˆå™¨åç§°éœ€è¦æ˜¯ä½ æœ¬åœ° app çš„åç§°ï¼Œæ¯”å¦‚è°·æ­Œæµè§ˆå™¨åœ¨ Mac ä¸Šå«åš Google Chromeï¼Œåœ¨ Windows ä¸Šå«åš chromeã€‚</p></div><p>åœ¨ <strong>webpack V5</strong> ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‡å®š open å±æ€§ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„é…ç½®å’Œ <a href="https://www.npmjs.com/package/open" target="_blank" rel="noreferrer">open</a> ä¸€æ ·ï¼Œæ¯”å¦‚æˆ‘è¦é…ç½®é»˜è®¤æ‰“å¼€ Chrome æµè§ˆå™¨ï¼Œå¹¶ä¸”å¼€å¯éšç§æ¨¡å¼ï¼Œä½ å¯ä»¥è¿™ä¹ˆè®¾ç½®ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Google Chrome&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;--incognito&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="openpage" tabindex="-1">openPage <a class="header-anchor" href="#openpage" aria-label="Permalink to &quot;openPage&quot;">â€‹</a></h3><p>å½“æ‰“å¼€æµè§ˆå™¨çš„æ—¶å€™ï¼ŒæŒ‡å®šè¦æ‰“å¼€çš„é¡µé¢ã€‚å®ƒå¯ä»¥æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°ç»„ï¼Œè¡¨ç¤ºè¦æ‰“å¼€ä¸€ç»„é¡µé¢ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  openPage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;index.html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // openPage: [&#39;index.html&#39;, &#39;login.html&#39;],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="compress" tabindex="-1">compress <a class="header-anchor" href="#compress" aria-label="Permalink to &quot;compress&quot;">â€‹</a></h3><p>å¯ç”¨ gizp å‹ç¼©ã€‚å®ƒæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  compress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>å½“ä½ è®¾ç½®ä¸º true æ—¶ï¼Œå“åº”å¤´ä¼šå¤šå‡ºå¦‚ä¸‹å­—æ®µï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Content-Encoding: gzip</span></span></code></pre></div><h3 id="writetodisk" tabindex="-1">writeToDisk <a class="header-anchor" href="#writetodisk" aria-label="Permalink to &quot;writeToDisk&quot;">â€‹</a></h3><p>æ˜¯å¦å°†æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶å†™å…¥åˆ°ç¡¬ç›˜ä¸­ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå¼€å‘æœåŠ¡å™¨ä¸‹çš„ç”Ÿæˆæ–‡ä»¶æ˜¯åœ¨å†…å­˜ä¸­çš„ï¼Œå¦‚æœä½ æƒ³åœ¨æœ¬åœ°çœ‹åˆ°å¼€å‘ç¯å¢ƒä¸‹æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶æ˜¯å•¥æ ·çš„ï¼Œå¯ä»¥å°†å®ƒè®¾ç½®ä¸º trueã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  writeToDisk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>å®ƒä¼šå°†ç”Ÿæˆçš„æ–‡ä»¶æ”¾åœ¨ output.path ä¸­é…ç½®çš„è·¯å¾„ä¸­</strong>ã€‚å®ƒçš„å€¼ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æ¥æ”¶ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼æ¥å†³å®šè¿™ä¸ªæ–‡ä»¶è¦ä¸è¦å†™è¿›ç¡¬ç›˜ï¼Œä¾‹å¦‚ä¸‹é¢çš„é…ç½®ï¼Œå°±åªå°† js æ–‡ä»¶å†™è¿›ç¡¬ç›˜ä¸­ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  writeToDisk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">filePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">js</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filePath)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="onlistening" tabindex="-1">onListening <a class="header-anchor" href="#onlistening" aria-label="Permalink to &quot;onListening&quot;">â€‹</a></h3><p>å½“ webpack-dev-server å¼€å§‹ç›‘å¬ç«¯å£ä¸Šçš„è¿æ¥æ—¶ï¼Œè¦æ‰§è¡Œçš„æ“ä½œã€‚ä»–æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onListening</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> port</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> server.listeningApp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().port;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Listening on port:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, port);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="before-ğŸ”‘" tabindex="-1">before ğŸ”‘ <a class="header-anchor" href="#before-ğŸ”‘" aria-label="Permalink to &quot;before ğŸ”‘&quot;">â€‹</a></h3><p>å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨ webpack-dev-server æ‰€æœ‰çš„å†…ç½®ä¸­é—´ä»¶æ‰§è¡Œå‰æ‰§è¡Œã€‚æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°ä¸­åšå¾ˆå¤šæœ‰æ„æ€çš„äº‹ï¼Œæ¯”å¦‚æ•°æ® mockç­‰ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">before</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(app) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/user/1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Jerry&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ä¸Šé¢çš„ä»£ç ï¼Œç›¸å½“äº mock äº†ä¸€ä¸ª <code>/api/user/1</code> çš„æ¥å£ï¼Œå®ƒè¿”å›ä¸€ä¸ª json å¯¹è±¡ã€‚ä½ å¯ä»¥åœ¨ä½ çš„ä¸šåŠ¡ä»£ç ä¸­è°ƒç”¨è¿™ä¸ªæ¥å£ï¼Œä¾‹å¦‚é€šè¿‡ axios è¯·æ±‚ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">axios.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/user/1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // handle res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="after" tabindex="-1">after <a class="header-anchor" href="#after" aria-label="Permalink to &quot;after&quot;">â€‹</a></h3><p>å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨ dev-server å†…éƒ¨ä¸­é—´ä»¶æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œã€‚ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œæ•°æ® mockï¼Œè¿™é‡Œå°±ä¸å¤šè§£é‡Šäº†ã€‚å®ƒå’Œ before ç›¸å½“äºä¸¤ä¸ªé’©å­ï¼Œä¸€ä¸ªåœ¨ dev-server æ‰€æœ‰å†…ç½®ä¸­é—´ä»¶æ‰§è¡Œå‰æ‰§è¡Œï¼Œä¸€ä¸ªåœ¨ dev-server æ‰€æœ‰å†…ç½®ä¸­é—´ä»¶æ‰§è¡Œä¹‹åæ‰§è¡Œã€‚</p><h3 id="clientloglevel" tabindex="-1">clientLogLevel <a class="header-anchor" href="#clientloglevel" aria-label="Permalink to &quot;clientLogLevel&quot;">â€‹</a></h3><p>è®¾ç½®ä½  DevTool ä¸Šæ§åˆ¶å°çš„æ—¥å¿—çº§åˆ«ã€‚æˆ‘ä»¬åœ¨æµè§ˆå™¨çš„æ§åˆ¶å°ä¸Šï¼Œç»å¸¸ä¼šçœ‹åˆ°ä¸€äº›æ—¥å¿—ä¿¡æ¯æˆ–è€…ä¸€äº›ç¼–è¯‘è­¦å‘Šæˆ–è€…é”™è¯¯ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[WDS] App updated. Recompiling...</span></span>
<span class="line"><span>[WDS] App hot update...</span></span>
<span class="line"><span>[HMR] Checking for updates on the server...</span></span>
<span class="line"><span>[HMR] Nothing hot updated.</span></span>
<span class="line"><span>[HMR] App is up to date.</span></span></code></pre></div><p>ä½ å¯ä»¥é€šè¿‡è®¾ç½®ä¸åŒçš„çº§åˆ«æ¥é™åˆ¶æ§åˆ¶å°çš„è¾“å‡ºï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  clientLogLevel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;error&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // åªæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ç±»ä¼¼çš„çº§åˆ«è¿˜æœ‰ infoï¼Œdebugï¼Œwarn ç­‰ã€‚<strong>å¦‚æœä½ å«Œæ—¥å¿—å¤ªå¤šå¾ˆçƒ¦ï¼Œé‚£ä¹ˆå¯ä»¥è®¾ç½®ä¸º <code>silent</code> æ¥å…³æ‰æ—¥å¿—ï¼ˆä½†æ˜¯é”™è¯¯ä¿¡æ¯è¿˜æ˜¯ä¼šå±•ç¤ºï¼‰ã€‚</strong></p><h3 id="overlay" tabindex="-1">overlay <a class="header-anchor" href="#overlay" aria-label="Permalink to &quot;overlay&quot;">â€‹</a></h3><p>å½“ <strong>ç¼–è¯‘æŠ¥è­¦å‘Šæˆ–è€…å‡ºé”™</strong> çš„æ—¶å€™ï¼Œæ˜¯å¦åœ¨æµè§ˆå™¨ä¸Šæ˜¾ç¤ºä¸€ä¸ªå…¨å±çš„é®å±‚æ¥å±•ç¤ºè¿™äº›ä¿¡æ¯ã€‚æ³¨æ„è¿™é‡Œæ˜¾ç¤ºçš„ç¼–è¯‘ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ä½ çš„ä»£ç ä¸ç¬¦åˆæŸä¸ª eslint æ ‡å‡†ï¼Œæˆ–è€…ä»£ç å°‘ä¸ªæ‹¬å·ç­‰ä¼šå¼•èµ·ç¼–è¯‘å‡ºé”™çš„æ—¶å€™ã€‚æ¯”å¦‚å¦‚ä¸‹ä»£ç ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello&#39;</span></span></code></pre></div><p>ä¼šæŠ¥é”™ï¼š</p><p><img src="`+t+`" alt="compile error"></p><p>å½“è®¾ç½®ä¸º true çš„æ—¶å€™ï¼Œåªä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚å¦‚æœä½ æƒ³æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯å’Œé”™è¯¯ä¿¡æ¯çš„è¯ï¼Œå¯ä»¥è®¾ç½®æˆä¸€ä¸ªå¯¹è±¡ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  overlay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    warnings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    errors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="quiet" tabindex="-1">quiet <a class="header-anchor" href="#quiet" aria-label="Permalink to &quot;quiet&quot;">â€‹</a></h3><p>æˆ‘ä»¬çŸ¥é“ï¼Œå½“è¿è¡Œ <code>npm run dev</code> æ—¶ï¼Œå‘½ä»¤è¡Œä¼šæ‰“å°å‡ºå¾ˆå¤šæ—¥å¿—ï¼š</p><p><img src="`+p+`" alt="console info"></p><p>ä½ å¯ä»¥é€šè¿‡è®¾ç½® quiet ä¸º true æ¥ç¦ç”¨æ‰æ—¥å¿—ã€‚<strong>æ³¨æ„ï¼Œæ­¤æ—¶è­¦å‘Šå’Œé”™è¯¯ä¿¡æ¯ä¹Ÿä¸ä¼šæ˜¾ç¤ºäº†ï¼Œæ‰€ä»¥è¿™ä¸ªå±æ€§è¿˜æ˜¯æ…ç”¨ã€‚</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  quiet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><img src="`+l+`" alt="console quiet"></p><h3 id="noinfo" tabindex="-1">noInfo <a class="header-anchor" href="#noinfo" aria-label="Permalink to &quot;noInfo&quot;">â€‹</a></h3><p>å®ƒä¹Ÿæ˜¯ä¸€ä¸ªæ—¥å¿—è¾“å‡ºçš„æ§åˆ¶ã€‚noInfo çš„ä½œç”¨æ˜¯ä¸è¾“å‡º webpack çš„æ‰“åŒ…ä¿¡æ¯ï¼Œä½†æ˜¯å¯¹äºé”™è¯¯å’Œè­¦å‘Šè¿˜æ˜¯ä¼šè¾“å‡ºçš„ã€‚å…³äºå®ƒå’Œ quiet çš„ä¼˜å…ˆçº§ï¼Œè¯»è€…å¯ä»¥è‡ªè¡Œå°è¯•ä¸€ä¸‹ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  noInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><img src="`+h+`" alt="console info noinfo"></p><h3 id="stats" tabindex="-1">stats <a class="header-anchor" href="#stats" aria-label="Permalink to &quot;stats&quot;">â€‹</a></h3><p><strong>è¿™ä¸ªé€‰é¡¹å¯ä»¥è®©ä½ ç²¾ç¡®åœ°æ§åˆ¶æ˜¾ç¤ºä»€ä¹ˆ bundle ä¿¡æ¯ï¼Œå®ƒæ˜¯ç”¨æ¥æ§åˆ¶ bundle ä¿¡æ¯çš„æ˜¾ç¤ºçš„ã€‚</strong> å¦‚æœä½ ä¸æƒ³ä½¿ç”¨ noInfo å’Œ quiet æ¥é…ç½®çš„è¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ä½ å¯ä»¥å‚è€ƒ <a href="https://webpack.js.org/configuration/stats/" target="_blank" rel="noreferrer">stats</a> é…ç½®æ¥æ›´è¿›ä¸€æ­¥çš„äº†è§£ã€‚æ¯”å¦‚ä½ åªæƒ³çœ‹åˆ° bundle çš„é”™è¯¯ä¿¡æ¯ï¼Œé‚£ä¹ˆå¯ä»¥é…ç½®ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  stats</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;errors-only&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>æ³¨æ„ï¼Œå®ƒåœ¨ä¸ quiet æˆ– noInfo ä¸€èµ·ä½¿ç”¨æ—¶ä¸èµ·ä½œç”¨ã€‚</strong></p><h3 id="inline-ğŸ”‘" tabindex="-1">inline ğŸ”‘ <a class="header-anchor" href="#inline-ğŸ”‘" aria-label="Permalink to &quot;inline ğŸ”‘&quot;">â€‹</a></h3><p>inline = true, inline æ¨¡å¼ï¼›inline = falseï¼Œiframe æ¨¡å¼ã€‚</p><p><strong>devServer çš„å®æ—¶é¢„è§ˆåŠŸèƒ½ï¼Œå®é™…ä¸Šä¾é çš„æ˜¯ä¸€ä¸ªæ³¨å…¥è¿›é¡µé¢çš„ä»£ç†å®¢æˆ·ç«¯ä¸ devServer ä¹‹é—´çš„é€šä¿¡æ¥å®ç°çš„ã€‚å¦‚æœä½ å¼€å¯äº† inline æ¨¡å¼ï¼Œè¿™ä¸ªè„šæœ¬å°±ä¼šæ³¨å…¥è¿›ä½ çš„ bundle æ¥è´Ÿè´£ä¸ devServer é€šä¿¡ï¼Œæ„å»ºä¿¡æ¯ä¹Ÿä¼šå®æ—¶çš„æ˜¾ç¤ºåœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸Šã€‚</strong></p><p>ç›¸åçš„ï¼Œå¦‚æœä½ è®¾ç½®æˆ falseï¼Œé‚£ä¹ˆ devServer å°†æ— æ³•ç›´æ¥æ§åˆ¶ä½ æ­£åœ¨å¼€å‘çš„ç½‘é¡µï¼Œè¿™æ—¶å€™å®ƒä¼šåœ¨ä½ çš„é¡µé¢ä¸ŠåŠ ä¸€ä¸ª iframeï¼Œé€šè¿‡ iframe çš„åˆ·æ–°æ¥å®ç°å®æ—¶é¢„è§ˆçš„æ•ˆæœã€‚ä¸è¿‡è¿™æ—¶å€™ä½ è¦é€šè¿‡ <a href="http://localhost:8080/webpack-dev-server/" target="_blank" rel="noreferrer">http://localhost:8080/webpack-dev-server/</a> å»è®¿é—®ä½ çš„åº”ç”¨ã€‚</p><p><img src="`+k+`" alt="inline"></p><p><strong>æ¨èé‡‡ç”¨é»˜è®¤å€¼ï¼Œå³ä½¿ç”¨ inline æ¨¡å¼æ¥å®æ—¶é¢„è§ˆã€‚</strong></p><h3 id="public" tabindex="-1">public <a class="header-anchor" href="#public" aria-label="Permalink to &quot;public&quot;">â€‹</a></h3><p>ä¸€èˆ¬ç”¨ä¸åˆ°ã€‚ä½†æ˜¯å¦‚æœä½ çš„æœ¬åœ°å¼€å¯äº†ä»£ç†ï¼Œå°†ä½ çš„æœåŠ¡è½¬å‘äº†å¦ä¸€ä¸ªåœ°å€ï¼Œé‚£ä¹ˆè¿™ä¸ªé…ç½®é¡¹å°±èµ·ä½œç”¨äº†ã€‚æ¯”å¦‚ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mysite.com:9999&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>é»˜è®¤æ‰“å¼€çš„åœ°å€å°±æ˜¯ mysite.com:9999 äº†ã€‚</p><p><img src="`+r+`" alt="public"></p><h3 id="publicpath-ğŸ”‘" tabindex="-1">publicPath ğŸ”‘ <a class="header-anchor" href="#publicpath-ğŸ”‘" aria-label="Permalink to &quot;publicPath ğŸ”‘&quot;">â€‹</a></h3><p>è¿™ä¸ªæ˜¯ç”¨æ¥é…ç½®ä½ æ‰“åŒ…åçš„æ–‡ä»¶è·¯å¾„çš„ã€‚æ¯”å¦‚ä½ çš„æœåŠ¡å™¨è¿è¡Œåœ¨ <a href="http://localhost:8080" target="_blank" rel="noreferrer">http://localhost:8080</a> ä¸Šï¼Œç„¶å <code>output.filename</code> è®¾ç½®ä¸º bundle.jsã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>devServer.publicPath</code> ä¸º &#39;/&#39;ï¼Œæ‰€ä»¥ä½ å¯ä»¥é€šè¿‡ <a href="http://localhost:8080/bundle.js" target="_blank" rel="noreferrer">http://localhost:8080/bundle.js</a> æ¥è®¿é—®ä½ æ‰“åŒ…åçš„æ–‡ä»¶ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥è‡ªå·±è®¾ç½®å…·ä½“çš„è·¯å¾„ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  publicPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/assets/&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // publicPath: &#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>å¯ä»¥çœ‹ä¸€ä¸‹æ—¥å¿—ï¼š</p><p><img src="`+d+`" alt="public path"></p><p>è¿™æ—¶å€™ä½ åº”è¯¥é€šè¿‡ <a href="http://localhost:8080/assets/index.html" target="_blank" rel="noreferrer">http://localhost:8080/assets/index.html</a> æ¥è®¿é—®é¡µé¢ï¼Œä½ çš„ bundle.js æ–‡ä»¶ä¹Ÿæ˜¯åœ¨ <a href="http://localhost:8080/assets/" target="_blank" rel="noreferrer">http://localhost:8080/assets/</a> è¿™ä¸ªç›®å½•ä¸‹ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å°† public å’Œ publicPath ç»“åˆèµ·æ¥é…ç½®ï¼Œä¾‹å¦‚ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8888</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost:8888/assets&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  publicPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/assets/&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><img src="`+E+`" alt="public and public path"></p><p>æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼š</p><ol><li>publicPath çš„å€¼æ°¸è¿œè¦ä»¥ / å¼€å¤´ï¼Œä»¥ / ç»“å°¾</li><li><strong>publicPath çš„å€¼æœ€å¥½å’Œ output.path ä¿æŒä¸€è‡´</strong></li></ol><h3 id="https" tabindex="-1">https <a class="header-anchor" href="#https" aria-label="Permalink to &quot;https&quot;">â€‹</a></h3><p>è®¾ç½®ä¸º true è¡¨ç¤ºå¼€å¯ httpsã€‚ä½ ä¹Ÿå¯ä»¥æŒ‡å®šè‡ªå·±çš„è¯ä¹¦ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  https</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/path/to/server.key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  cert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/path/to/server.crt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ca</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/path/to/ca.pem&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="http2" tabindex="-1">http2 <a class="header-anchor" href="#http2" aria-label="Permalink to &quot;http2&quot;">â€‹</a></h3><p>å®ƒæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å¼€å¯ http2 ä¼ è¾“ï¼ˆåŸºäºspdyï¼‰ã€‚<strong>è¿™ä¸ªå±æ€§åœ¨ node v10+ ä¸Šæ— æ•ˆã€‚</strong></p><h3 id="index" tabindex="-1">index <a class="header-anchor" href="#index" aria-label="Permalink to &quot;index&quot;">â€‹</a></h3><p>æ‰“å¼€çš„ index æ–‡ä»¶çš„åç§°ã€‚é»˜è®¤æ˜¯ index.htmlã€‚å½“ä½ é»˜è®¤çš„æ–‡ä»¶åä¸æ˜¯ index.html çš„æ—¶å€™ï¼ŒæŒ‡å®šå®ƒä¼šå¾ˆæœ‰ç”¨ï¼Œæ¯”å¦‚ç»“åˆ HtmlWebpackPlugin æ¥é…ç½®ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HtmlWebpackPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DevServer Test&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello.html&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello.html&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>è¿™æ ·çš„é…ç½®èƒ½ä¿è¯æˆ‘ä»¬æ­£ç¡®çš„æ‰“å¼€ index æ–‡ä»¶ã€‚</p><h3 id="allowedhosts" tabindex="-1">allowedHosts <a class="header-anchor" href="#allowedhosts" aria-label="Permalink to &quot;allowedHosts&quot;">â€‹</a></h3><p>é…ç½®å“ªäº›ä¸»æœºè®¿é—®æˆ‘ä»¬çš„æœåŠ¡ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  allowedHosts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;baidu.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;.hello.com&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="disablehostcheck" tabindex="-1">disableHostCheck <a class="header-anchor" href="#disablehostcheck" aria-label="Permalink to &quot;disableHostCheck&quot;">â€‹</a></h3><p>è®¾ç½®ä¸º true çš„è¯è¡¨ç¤ºç¦ç”¨ä¸»æœºæ£€æŸ¥ï¼Œè¿™æ—¶å€™ä½ å¯ä»¥æ¥æ”¶æ¥è‡ªä»»æ„ä¸»æœºçš„è¯·æ±‚ã€‚<strong>éå¸¸ä¸æ¨èè®¾ç½®ä¸º trueï¼Œå› ä¸ºè¿™å®¹æ˜“è®©ä½ æ”¶åˆ° DNS é‡ç»‘å®šæ”»å‡»ã€‚</strong></p><h3 id="host-ğŸ”‘" tabindex="-1">host ğŸ”‘ <a class="header-anchor" href="#host-ğŸ”‘" aria-label="Permalink to &quot;host ğŸ”‘&quot;">â€‹</a></h3><p>æŒ‡å®šè¦ä½¿ç”¨çš„ä¸»æœºã€‚</p><p>è¿™ä¸ªé…ç½®éå¸¸æœ‰ç”¨ï¼Œé¡¹ç›®å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸¸å¸¸é‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ æœ¬åœ°æ”¹äº†ä¸€ä¸ªä¸œè¥¿ï¼Œè¿˜æ²¡ä¸Šæµ‹è¯•ç¯å¢ƒï¼Œæƒ³è®©åˆ«äººå…ˆçœ‹çœ‹æ•ˆæœï¼Œä½ å°±éœ€è¦åˆ«äººè®¿é—®ä½ ç”µè„‘ä¸Šè¿è¡Œçš„åº”ç”¨ï¼Œè¿™æ—¶ä½ éœ€è¦é…ç½®ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0.0.0.0&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ä½ å°†ä½ çš„ ip å‘ç»™ä½ çš„åŒäº‹ï¼Œå®ƒå°±å¯ä»¥é€šè¿‡ ip:port/path/to/app æ¥è®¿é—®ä½ ç”µè„‘ä¸Šçš„æœåŠ¡äº†ã€‚è¿™æ—¶å€™ä½ çš„ disableHostCheck éœ€è¦è®¾ç½®ä¸º trueï¼Œå› ä¸ºåˆ«äººæ˜¯é€šè¿‡ä½ çš„ ip æ¥è®¿é—®çš„ã€‚</p><h3 id="uselocalip" tabindex="-1">useLocalIp <a class="header-anchor" href="#uselocalip" aria-label="Permalink to &quot;useLocalIp&quot;">â€‹</a></h3><p>æ˜¯å¦ä½¿ç”¨æœ¬åœ° ip æ‰“å¼€æµè§ˆå™¨ã€‚é»˜è®¤æ˜¯ falseã€‚</p><p>è¦æƒ³è¿™ä¸ªå±æ€§èµ·ä½œç”¨ï¼Œä½ çš„ host å±æ€§è¦ä¹ˆæ˜¯æœ¬åœ°çš„ ipï¼Œè¦ä¹ˆæ˜¯ 0.0.0.0ã€‚è¿™ä¸ªå±æ€§å¾ˆå°‘ç”¨åˆ°ï¼Œå®åœ¨è¦é…ç½®çš„è¯ï¼Œå‚è€ƒå¦‚ä¸‹ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0.0.0.0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useLocalIp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="hot-ğŸ”‘" tabindex="-1">hot ğŸ”‘ <a class="header-anchor" href="#hot-ğŸ”‘" aria-label="Permalink to &quot;hot ğŸ”‘&quot;">â€‹</a></h3><p>å¼€å¯çƒ­æ¨¡å—æ›´æ–°ï¼ˆHMRï¼‰</p><h3 id="hotonly-ğŸ”‘" tabindex="-1">hotOnly ğŸ”‘ <a class="header-anchor" href="#hotonly-ğŸ”‘" aria-label="Permalink to &quot;hotOnly ğŸ”‘&quot;">â€‹</a></h3><p>å½“æ„å»ºå¤±è´¥çš„æ—¶å€™ï¼Œä¹Ÿä¸è¦åˆ·æ–°æµè§ˆå™¨ï¼Œä¾æ—§ä½¿ç”¨ HMRã€‚é€šå¸¸æˆ‘ä»¬ä¸€èµ·è®¾ç½®ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  hot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  hotOnly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="contentbase-ğŸ”‘" tabindex="-1">contentBase ğŸ”‘ <a class="header-anchor" href="#contentbase-ğŸ”‘" aria-label="Permalink to &quot;contentBase ğŸ”‘&quot;">â€‹</a></h3><p>æˆ‘ä»¬çŸ¥é“ï¼ŒdevServer é€šè¿‡ HTTP æœåŠ¡æš´éœ²å‡ºæ¥çš„æ–‡ä»¶åˆ†ä¸ºä¸¤ç±»ã€‚ä¸€ç±»æ˜¯ webpack æ‰“åŒ…å‡ºçš„æ–‡ä»¶ï¼Œä¸€ç±»æ˜¯æœ¬åœ°çš„é™æ€æ–‡ä»¶ã€‚å‰è€…æˆ‘ä»¬å¯ä»¥é€šè¿‡ publicPath æ¥æŒ‡å®šæœåŠ¡çš„åœ°å€ï¼Œåè€…å°±è¦é æˆ‘ä»¬çš„ contentBase æ¥æŒ‡å®šäº†ã€‚æ¯”å¦‚ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  contentBase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;public&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>è¿™å°±æŠŠé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ public æ–‡ä»¶å¤¹ä½œä¸ºæœåŠ¡æ–‡ä»¶çš„è·¯å¾„äº†ã€‚å¦‚æœè¿™æ—¶å€™ä½ é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ª public æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹é‡Œæœ‰ä¸€ä¸ª hello.txt æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥é€šè¿‡ <a href="http://localhost:8091/hello.txt" target="_blank" rel="noreferrer">http://localhost:8091/hello.txt</a> æ¥è®¿é—®è¿™ä¸ªæ–‡ä»¶äº†ã€‚</p><p>å¦‚æœä½ æœ‰å¤šä¸ªæ–‡ä»¶å¤¹éœ€è¦æŒ‡å®šï¼Œä¹Ÿå¯ä»¥é…ç½®æˆæ•°ç»„ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  contentBase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;public&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;assets&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="contentbasepublicpath-ğŸ”‘" tabindex="-1">contentBasePublicPath ğŸ”‘ <a class="header-anchor" href="#contentbasepublicpath-ğŸ”‘" aria-label="Permalink to &quot;contentBasePublicPath ğŸ”‘&quot;">â€‹</a></h3><p><strong>è¿™æ˜¯ webpack V5 æ–°å¢çš„ç‰¹æ€§ã€‚</strong> å®ƒç»™ä½ çš„ contentBase é‡Œé¢æœåŠ¡çš„å†…å®¹åŠ ä¸Šè®¿é—®å‰ç¼€ã€‚æ¯”å¦‚ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  contentBase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;public&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  contentBasePublicPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/ppp&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ä½ åœ¨æµè§ˆå™¨çš„è®¿é—®è·¯å¾„å‰é¢å°±è¦åŠ ä¸Š ppp å‰ç¼€ï¼š<a href="http://localhost:8091/ppp/hello.txt%E3%80%82%E5%A6%82%E6%9E%9C%E4%BD%A0" target="_blank" rel="noreferrer">http://localhost:8091/ppp/hello.txtã€‚å¦‚æœä½ </a> contentBase é…ç½®çš„æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆä½ è¿™ä¸ªä¹Ÿè¦é…ç½®æˆå¯¹åº”çš„æ•°ç»„ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  contentBase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;public&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;assets&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  contentBasePublicPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/public&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/assets&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="watchcontentbase" tabindex="-1">watchContentBase <a class="header-anchor" href="#watchcontentbase" aria-label="Permalink to &quot;watchContentBase&quot;">â€‹</a></h3><p>å‘Šè¯‰ dev-server å»ç›‘å¬ devServer.contentBase è·¯å¾„ä¸‹çš„æ–‡ä»¶ã€‚å¦‚æœè®¾ç½®ä¸ºå®ƒ true çš„è¯ï¼Œé‚£ä¹ˆè¯¥ç›®å½•ä¸‹ä»»æ„æ–‡ä»¶çš„ä¿®æ”¹éƒ½ä¼šå‡ºå‘é¡µé¢çš„åˆ·æ–°ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  contentBase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;public&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  watchContentBase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ï¼ˆæˆ‘ç»“åˆä¸Šé¢çš„ hello.txt è¯•äº†ï¼Œæˆ‘ä¿®æ”¹ hello.txt æ–‡ä»¶åï¼Œé¡µé¢å¹¶æ²¡æœ‰åˆ·æ–°ã€‚ä¸çŸ¥é“æ˜¯å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Œå¾…ç ”ç©¶ã€‚ï¼‰</p><h3 id="watchoptions" tabindex="-1">watchOptions <a class="header-anchor" href="#watchoptions" aria-label="Permalink to &quot;watchOptions&quot;">â€‹</a></h3><p>æ–‡ä»¶ç›‘å¬ç›¸å…³çš„æ§åˆ¶ã€‚å¯ä»¥å‚è€ƒ watchOptions ç« èŠ‚ï¼Œä»–ä»¬çš„é…ç½®æ˜¯ä¸€æ ·çš„ã€‚</p><h3 id="headers" tabindex="-1">headers <a class="header-anchor" href="#headers" aria-label="Permalink to &quot;headers&quot;">â€‹</a></h3><p>ç»™æ‰€æœ‰çš„å“åº”æ·»åŠ å“åº”å¤´ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;X-header&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;This is custom header&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ç»“æœï¼š</p><p><img src="`+o+`" alt="headers"></p><h3 id="livereload" tabindex="-1">liveReload <a class="header-anchor" href="#livereload" aria-label="Permalink to &quot;liveReload&quot;">â€‹</a></h3><p>æ§åˆ¶æµè§ˆå™¨æ˜¯å¦å®æ—¶åˆ·æ–°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ç›‘æµ‹åˆ°æ–‡ä»¶æ”¹å˜æ—¶ï¼Œdev-server ä¼šåˆ·æ–°é¡µé¢ã€‚è¦æƒ³ liveReload ç”Ÿæ•ˆçš„è¯ï¼ŒdevServer.hot è¦ä¸º falseï¼Œæˆ–è€… devServer.watchContentBase ä¸º trueã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  liveReload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="socket-ç›¸å…³" tabindex="-1">socket ç›¸å…³ <a class="header-anchor" href="#socket-ç›¸å…³" aria-label="Permalink to &quot;socket ç›¸å…³&quot;">â€‹</a></h3><p>è¿™ä¸ªæˆ‘ä»¬å‡ ä¹å¾ˆå°‘å»é…ç½®ï¼Œåšä¸€ä¸ªäº†è§£å³å¯ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;socket&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¦ç›‘å¬çš„ Unix socket</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  sockHost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mysocket.test&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å‘Šè¯‰è¿æ¥åˆ° devServer çš„å®¢æˆ·ç«¯ä½¿ç”¨æä¾›çš„ socket ä¸»æœº</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  sockPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/mysocket&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¿é—® socket çš„è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  sockPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8080</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // å‘Šè¯‰å®¢æˆ·ç«¯ä½¿ç”¨è¿™ä¸ªç«¯å£å»è¿æ¥ devServer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="historyapifallback-ğŸ”‘" tabindex="-1">historyApiFallback ğŸ”‘ <a class="header-anchor" href="#historyapifallback-ğŸ”‘" aria-label="Permalink to &quot;historyApiFallback ğŸ”‘&quot;">â€‹</a></h3><p>å½“ä½¿ç”¨ HTML5 History API çš„æ—¶å€™ï¼Œindex.html è¿˜è¦æ‰¿è½½ç€ 404 çš„è¯·æ±‚ã€‚é€šè¿‡è®¾ç½®è¿™ä¸ªå±æ€§ä¸º true å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  historyApiFallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>è¿™æ—¶å€™ï¼Œä½ è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„è·¯å¾„ï¼Œä¹Ÿä¼šå»è¯·æ±‚ index.html æ–‡ä»¶çš„å†…å®¹ã€‚</p><p>è¿™ä¸ªå±æ€§è¿˜æ”¯æŒæ›´é«˜çº§çš„é…ç½®ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  historyApiFallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    rewrites</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { from:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">^</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, to: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/views/landing.html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { from:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">^</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">subpage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, to: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/views/subpage.html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { from:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, to: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/views/404.html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æœ‰å…´è¶£çš„è¯å¯ä»¥è‡ªå·±å°è¯•ä¸€ä¸‹ã€‚</p><h3 id="proxy-ğŸ”‘" tabindex="-1">proxy ğŸ”‘ <a class="header-anchor" href="#proxy-ğŸ”‘" aria-label="Permalink to &quot;proxy ğŸ”‘&quot;">â€‹</a></h3><p>æƒ³å¿…è¿™ä¸ªå±æ€§å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰ï¼Œå¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ä¼šéœ€è¦é…ç½®å®ƒæ¥å®ç°è·¨åŸŸã€‚è¯¦ç»†çš„é…ç½®å¯ä»¥å‚è€ƒ <a href="https://github.com/chimurai/http-proxy-middleware#options" target="_blank" rel="noreferrer">http-proxy-middleware</a> è¿™ä¸ªåŒ…ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»å¸¸è§çš„å‡ ç§ã€‚</p><p>å½“ä½ çš„åç«¯éƒ¨ç½²åœ¨ 35.123.18.192 ä¸Šçš„æ—¶å€™ï¼Œä½ å¯ä»¥è¿™ä¹ˆé…ç½®ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;/api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://35.123.18.192&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>è¿™æ—¶å€™ï¼Œå¦‚æœåœ¨ä»£ç ä¸­è¯·æ±‚ /api/users ï¼Œè¿™ä¸ªè¯·æ±‚ä¼šè¢«ä»£ç†å‘é€åˆ° <a href="http://35.123.18.192/api/users%E3%80%82" target="_blank" rel="noreferrer">http://35.123.18.192/api/usersã€‚</a></p><p>å½“ä½ ä¸æƒ³è¦å‘é€ /api è¿™ä¸ªå‰ç¼€çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨ pathRewrite æ¥æ”¹æ‰å®ƒï¼Œè¿™æ—¶å€™è¦å°†è·¯å¾„å¯¹åº”çš„å€¼è®¾ç½®æˆå¯¹è±¡ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;/api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        target: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://35.123.18.192&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        pathRewrite: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &#39;^/api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>è¿™é‡Œé…ç½®çš„ pathRewrite è¡¨ç¤ºï¼Œå¦‚æœä¸€ä¸ªè¯·æ±‚è·¯å¾„ä»¥ /api å¼€å¤´ï¼Œç»Ÿä¸€çš„å°† /api å»æ‰ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>axios.get(&#39;/api/users/&#39;)</code> å®é™…ä¸Šä¼šå‘é€ï¼š<code>http://35.123.18.192/users</code> è¿™ä¸ªè¯·æ±‚ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ª pathRewrite åšä¸€äº›æœ‰æ„æ€çš„äº‹ï¼Œæ¯”å¦‚è¿™ä¸ªåœºæ™¯ï¼šåç«¯æŸä¸ªæ¥å£æ²¡å†™å®Œï¼Œå®ƒè¦ç»™ä½ ä¸€ä¸ª mock æ¥å£ï¼Œä½ å°±å¯ä»¥åœ¨è¿™é‡Œé…ç½®é‡å†™è§„åˆ™äº†ï¼Œæ¯”å¦‚ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pathRewrite</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;/users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/fake-users&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>å¦‚æœä½ æƒ³ä»£ç†å¤šä¸ªè·¯å¾„åˆ°åŒä¸€ä¸ªç›®æ ‡æœåŠ¡å™¨ä¸Šï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ context å±æ€§æ¥é…ç½®ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    context: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/auth&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    target: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://localhost:3000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    context: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/v2/auth&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/v2/api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    target: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://localhost:4000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ— æ•ˆè¯ä¹¦è¿è¡Œåœ¨HTTPSä¸Šçš„åç«¯æœåŠ¡å™¨å°†ä¸è¢«æ¥å—ã€‚å¦‚æœéœ€è¦ï¼Œå¯ä»¥åƒè¿™æ ·ä¿®æ”¹é…ç½®ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;/api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      target: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://xxx.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      secure: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>å¦‚æœä½ æƒ³é€‰æ‹©æ€§çš„ä»£ç†ä¸€äº›è¯·æ±‚ï¼Œæ¯”å¦‚é’ˆå¯¹ API è¯·æ±‚èµ°ä»£ç†ï¼Œé’ˆå¯¹ html é¡µé¢è¯·æ±‚ä¸èµ°ä»£ç†ï¼Œä½ å¯ä»¥ä½¿ç”¨ bypass æ¥æ§åˆ¶è¿™ç§è¡Œä¸ºï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  bypass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req, res, proxy) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (req.url.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Skipping proxy for browser request.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/index.html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>bypass æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„è§„åˆ™æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>å¦‚æœè¿”å› null æˆ–è€… undefinedï¼Œä½¿ç”¨ä»£ç†æ¥å¤„ç†è¯·æ±‚ï¼›</li><li>å¦‚æœè¿”å› falseï¼Œé‚£ä¹ˆè¿™ä¸ªè¯·æ±‚ç»“æœä¸º 404</li><li>è¿”å›ä¸€ä¸ªè·¯å¾„ï¼Œå°±å»è¯·æ±‚è¿™ä¸ªè·¯å¾„çš„èµ„æºï¼Œä¸èµ°ä»£ç†</li></ul><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŸå§‹çš„ Host å¤´æ˜¯è¢«ä¸€ç›´ä¿ç•™çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»£ç†è¿‡å»çš„è¯·æ±‚å¤´ä¸­çš„ Host çš„å€¼æ˜¯æœ€åŸå§‹çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘é…ç½®äº† proxy è®¿é—® 35.123.23.24 æœåŠ¡å™¨ã€‚åº”ç”¨åœ¨æœ¬åœ°è¿è¡Œåï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒdevServer å‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨çš„è¯·æ±‚å¤´çš„ Host å­—æ®µï¼Œæ˜¯ localhostï¼Œä½†æ˜¯è¿™ä¸ªå¯¹äºè¿œç«¯æœåŠ¡å™¨æ¥è¯´ï¼Œå¯èƒ½ä¼šè¢«æ‹’ç»ã€‚æ‰€ä»¥æœ‰çš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å°† changeOrigin è®¾ç½®ä¸º true æ¥ä¿®æ”¹è¿™ç§é»˜è®¤è¡Œä¸ºã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;/api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      target: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://35.123.23.23&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      changeOrigin: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div>`,173)]))}const m=i(g,[["render",c]]);export{B as __pageData,m as default};
